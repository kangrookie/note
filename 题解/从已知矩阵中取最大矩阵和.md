# 从已知矩阵中取最大矩阵和

## 不限制大小

### 1.枚举到所有情况

该问题源于两个未知，一是大小未知，二是起点未知。故我们用矩阵降为一维的思想，对于每一个起点，先规定好行的长度，再枚举列的长度。会发现复杂度为
$$
\mathcal{O}(n^4)
$$

### 2.优化(dp)

首先想如果是一维序列，怎么求最大连续子序列，先扫描序列，到第i位时，如果前i-1得到的子序列大于零则i加入该子序列比从i开始重新构建子序列要大，如果小于零则应该从第i位重建子序列（注意前i-1得到的子序列不一定是最大的，而是含第i-1个数的最大连续子序列），依据这个方案扫描，在这个扫描过程中会出现最大子序列。

扩展到二维，我们我们规定好行长（k），规定好起点（1，i）（起点只在第一行），可将问题转换为序列b的最大连续子序列（bj为第j行从（j，i）到（j，i+k）的和）复杂度为
$$
\mathcal{O}(n^3)
$$

## 限制大小

1.先求得二维前缀和

2.dp

定义dp（i，j）为从（1，1）到（i，j）矩形范围内大小为m*m的最大矩阵和

状态转移方程为(设k为以（i，j）为右下角m*m的矩阵和)
$$
dp[i][j]=max(dp[i-1][j],dp[i][j-1],k)
$$

## 总结

降维的思想，最大连续子序列的算法